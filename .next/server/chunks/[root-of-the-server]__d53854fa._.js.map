{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/MohammedAlabdali/HousingMaintenance/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Initialize the Supabase client with proper Supabase URL and key\r\nconst supabaseUrl = 'zzzzz';\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10aWN2bXlmcmRtY2lhZWlwZnh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEwODc1OTMsImV4cCI6MjA1NjY2MzU5M30.6iudxBl6js0heW1mhoSmcXegTIN_lAN2GiFeA3plSIo';\r\n\r\n// Create the Supabase client\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\n// Store PostgreSQL direct connection URL for database initialization scripts\r\nexport const postgresUrl = 'postgresql://HousingMaintenance_owner:npg_fC8S4bpZLsJw@ep-weathered-meadow-a44a1v3i-pooler.us-east-1.aws.neon.tech/HousingMaintenance?sslmode=require';"],"names":[],"mappings":";;;;AAAA;;AAEA,kEAAkE;AAClE,MAAM,cAAc;AACpB,MAAM,cAAc;AAGb,MAAM,WAAW,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAG3C,MAAM,cAAc","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/MohammedAlabdali/HousingMaintenance/src/app/api/housing/rooms/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\nexport async function GET(request: Request) {\r\n  try {\r\n    console.log('[API] GET /api/housing/rooms - Starting request');\r\n    \r\n    // Extract query parameters\r\n    const { searchParams } = new URL(request.url);\r\n    const buildingId = searchParams.get('buildingId');\r\n    \r\n    console.log(`[API] Fetching rooms for buildingId: ${buildingId || 'all'}`);\r\n    \r\n    // Build query\r\n    let query = supabase\r\n      .from('rooms')\r\n      .select('*');\r\n    \r\n    // Add filters\r\n    if (buildingId) {\r\n      query = query.eq('building_id', buildingId);\r\n    }\r\n    \r\n    // Execute query\r\n    const { data, error } = await query;\r\n    \r\n    if (error) {\r\n      console.error('[API] Error fetching rooms:', error);\r\n      return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n    \r\n    // Transform database fields to match the Room interface if needed\r\n    const rooms = data?.map(room => ({\r\n      id: room.id,\r\n      building_id: room.building_id,\r\n      floor: room.floor,\r\n      room_number: room.room_number,\r\n      type: room.type,\r\n      status: room.status || 'available',\r\n      // Map other fields as needed\r\n    })) || [];\r\n    \r\n    console.log(`[API] Successfully fetched ${rooms.length} rooms`);\r\n    return NextResponse.json(rooms);\r\n  } catch (error: any) {\r\n    console.error('[API] Unexpected error in rooms API:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch rooms: ' + (error.message || 'Unknown error') }, \r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const room = await request.json();\r\n    \r\n    // Validate required fields\r\n    if (!room.building_id || !room.room_number || !room.type || room.floor === undefined) {\r\n      return NextResponse.json(\r\n        { error: 'Building ID, room number, floor, and type are required' }, \r\n        { status: 400 }\r\n      );\r\n    }\r\n    \r\n    // Insert room\r\n    const { data, error } = await supabase\r\n      .from('rooms')\r\n      .insert(room)\r\n      .select()\r\n      .single();\r\n    \r\n    if (error) {\r\n      console.error('Error creating room:', error);\r\n      return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n    \r\n    return NextResponse.json(data);\r\n  } catch (error: any) {\r\n    console.error('Unexpected error creating room:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to create room' }, \r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function PUT(request: Request) {\r\n  try {\r\n    const updates = await request.json();\r\n    const { id, ...roomData } = updates;\r\n    \r\n    if (!id) {\r\n      return NextResponse.json({ error: 'Room ID is required' }, { status: 400 });\r\n    }\r\n    \r\n    // Update room\r\n    const { data, error } = await supabase\r\n      .from('rooms')\r\n      .update(roomData)\r\n      .eq('id', id)\r\n      .select()\r\n      .single();\r\n    \r\n    if (error) {\r\n      console.error('Error updating room:', error);\r\n      return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n    \r\n    return NextResponse.json(data);\r\n  } catch (error: any) {\r\n    console.error('Unexpected error updating room:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to update room' }, \r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(request: Request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const id = searchParams.get('id');\r\n    \r\n    if (!id) {\r\n      return NextResponse.json({ error: 'Room ID is required' }, { status: 400 });\r\n    }\r\n    \r\n    // Delete room\r\n    const { error } = await supabase\r\n      .from('rooms')\r\n      .delete()\r\n      .eq('id', id);\r\n    \r\n    if (error) {\r\n      console.error('Error deleting room:', error);\r\n      return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n    \r\n    return NextResponse.json({ success: true });\r\n  } catch (error: any) {\r\n    console.error('Unexpected error deleting room:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to delete room' }, \r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}