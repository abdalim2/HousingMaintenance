{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/MohammedAlabdali/HousingMaintenance/src/app/purchase-orders/monthly/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { generateMonthlyPurchaseOrder } from '@/lib/services/purchaseService';\r\n\r\nexport default function MonthlyPurchaseOrderPage() {\r\n  const router = useRouter();\r\n  const [year, setYear] = useState<number>(new Date().getFullYear());\r\n  const [month, setMonth] = useState<number>(new Date().getMonth() + 1);\r\n  const [createdBy, setCreatedBy] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Years range (current year and 2 years back)\r\n  const currentYear = new Date().getFullYear();\r\n  const years = [currentYear, currentYear - 1, currentYear - 2];\r\n\r\n  // Month names in Arabic\r\n  const months = [\r\n    { value: 1, label: 'يناير' },\r\n    { value: 2, label: 'فبراير' },\r\n    { value: 3, label: 'مارس' },\r\n    { value: 4, label: 'أبريل' },\r\n    { value: 5, label: 'مايو' },\r\n    { value: 6, label: 'يونيو' },\r\n    { value: 7, label: 'يوليو' },\r\n    { value: 8, label: 'أغسطس' },\r\n    { value: 9, label: 'سبتمبر' },\r\n    { value: 10, label: 'أكتوبر' },\r\n    { value: 11, label: 'نوفمبر' },\r\n    { value: 12, label: 'ديسمبر' },\r\n  ];\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!createdBy.trim()) {\r\n      setError(\"الرجاء إدخال اسم منشئ الطلب\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const purchaseOrder = await generateMonthlyPurchaseOrder(year, month, createdBy);\r\n      \r\n      // Redirect to the newly created purchase order\r\n      router.push(`/purchase-orders/${purchaseOrder.id}`);\r\n    } catch (err: any) {\r\n      console.error('Error generating monthly purchase order:', err);\r\n      setError(err.message || 'حدث خطأ أثناء إنشاء طلب الشراء الشهري');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold dark:text-white\">إنشاء طلب شراء شهري</h1>\r\n        <Link href=\"/purchase-orders\" className=\"btn btn-secondary\">\r\n          العودة لقائمة طلبات الشراء\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6 dark:bg-gray-800\">\r\n        <p className=\"mb-6 text-gray-600 dark:text-gray-300\">\r\n          سيقوم النظام بإنشاء طلب شراء يتضمن جميع المواد المطلوبة لطلبات الصيانة المسجلة خلال الشهر المحدد.\r\n        </p>\r\n\r\n        {error && (\r\n          <div className=\"bg-red-100 border-r-4 border-red-500 text-red-700 p-4 mb-6 rounded-md dark:bg-red-900/30 dark:border-red-800 dark:text-red-400\">\r\n            <p>{error}</p>\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n            <div>\r\n              <label className=\"block mb-2 text-sm font-medium dark:text-gray-300\">السنة</label>\r\n              <select\r\n                value={year}\r\n                onChange={(e) => setYear(Number(e.target.value))}\r\n                className=\"select w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n                disabled={loading}\r\n              >\r\n                {years.map((y) => (\r\n                  <option key={y} value={y}>{y}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block mb-2 text-sm font-medium dark:text-gray-300\">الشهر</label>\r\n              <select\r\n                value={month}\r\n                onChange={(e) => setMonth(Number(e.target.value))}\r\n                className=\"select w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n                disabled={loading}\r\n              >\r\n                {months.map((m) => (\r\n                  <option key={m.value} value={m.value}>{m.label}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium dark:text-gray-300\">منشئ الطلب</label>\r\n            <input\r\n              type=\"text\"\r\n              value={createdBy}\r\n              onChange={(e) => setCreatedBy(e.target.value)}\r\n              className=\"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n              placeholder=\"أدخل اسمك هنا\"\r\n              disabled={loading}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-primary\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'جاري الإنشاء...' : 'إنشاء طلب الشراء الشهري'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}